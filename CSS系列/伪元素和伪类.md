因为写法相似，很多人容易将伪类与伪元素混淆。

伪元素用于创建一些不在文档树中的元素。比如说，我们可以通过`::before`伪元素来在一个元素前增加一些文本，并为这些文本添加CSS样式。虽然用户可以看到这些文本，但实际上这类文本不在文档树中，也无法通过JavaScript去操作它们。

而伪类本质是一种**选择器**，用于选择处于某种状态或者具有某种特性的元素。

### 1. 伪元素
CSS2标准中伪元素使用1个冒号，CSS3为了区分伪类和伪元素，规定伪元素使用2个冒号。为了兼容CSS2中就已经存在的伪元素的写法，1个冒号的伪元素仍被现代浏览器所支持：
![伪元素](https://pic.downk.cc/item/5ecd4235c2a9a83be5a49d15.png)

日常开发中，我们常用伪元素`::before`,`::after`来实现一些效果：
#### 1.1 添加修饰性内容
配合`content`使用实现图形效果：
![伪元素添加修饰性内容](https://img.imgdb.cn/item/6031555b5f4313ce25ce0be1.jpg)

与使用显式的HTML标签元素相比，使用伪元素的好处是HTML代码更加简洁。

#### 1.2 清除浮动
通常清除清除浮动的方式是在浮动元素后面添加一个空的div标签，然后设置它的`clear: both`。而通过设置浮动元素的`after`伪元素，我们就不需要添加无意义的div标签了：
```html
<style type="text/css">
  ul {
    margin: 200px;
    background: #ccc;
    padding: 10px;
    border: 1px solid #999;
    list-style: none;
  }
  ul::after {
    clear: both;
    content: '';
    display: block;
  }
  li {
    float: left;
    margin-left: 10px;
  }
</style>
<ul>
  <li>篮球</li>
  <li>网球</li>
  <li>棒球</li>
</ul>

```

> before、after伪元素必须设置content才能起作用，它们的`display`值默认是`inline`。

### 2. 伪类
![伪类](https://pic.downk.cc/item/5ecd41bac2a9a83be5a3e531.png)

其中状态伪类和结构化伪类在业务开发中比较常用：
#### 2.1 状态伪类
状态伪类是基于元素当前状态进行选择的。当元素处于状态伪类所对应的状态时会应用样式，而进入另一状态后，该样式就会失效。

开发中比较常用到`:hover`伪类，用于给元素指定鼠标悬浮在其上时的样式：
```css
.test:hover {
  color: red
}
```

当鼠标悬浮在`.test`元素上时字体会变成`red`，鼠标移开后样式会恢复到之前的状态。

#### 2.2 结构伪类
##### 2.2.1 :first-child
`:first-child`用于匹配父元素的第一个子元素，但也不只是第一个子元素这么简单，看下面这段代码的执行效果：
![:first-child](https://img.imgdb.cn/item/6032a7075f4313ce254a7908.jpg)

可以看到，`.a:first-child`只会匹配`class`为`a`的父元素下的第一个`class`为`a`的元素，同时它还必须满足是**父元素的第一个子元素**。由于第一个`container`内的第一个`class`为`a`的元素是`container`的第二个子元素，所以它不会命中规则。

所以，对于`.a:first-child`的更准确的描述是：匹配作为任何元素的第一个子元素的`.a`元素。这个是很容易被误解的一点。

##### 2.2.2 :first-of-type
相较于`:first-child`，`:first-of-type`的命中条件就没那么苛刻了，但其实它也有让初看文档的人误解的地方：
![:first-of-type](https://img.imgdb.cn/item/6032a4f95f4313ce2549d007.jpg)

在第一个`container`内，`.a:first-of-type`匹配到了两个元素——`p.a`以及`div.a`，可见`.a:first-of-type`匹配到的是`class`为`a`的**各自类型**（标签类型）的第一个。

而在第二个`container`内，让人意外的是，`div.a`没有被匹配到——这是因为与`div.a`同级的`div`元素中，第一个`div`元素的`class`是`b`，所以`div.a`不会命中规则。

##### 2.2.3 :not

##### 2.2.4 :nth-child

##### 2.2.5 :nth-of-type


在这里仅挑选了几个理解容易出错的伪类作讨论。

### 总结
伪类本质上是CSS选择器，业务开发中比较常用的有状态伪类`:hover`和结构性伪类`:first-child`等。

而伪元素用于创建不出现在文档树中的元素，比较常用的伪元素有`::before`、`::after`等，一般配合`content`属性使用来添加修饰性内容。使用伪元素可以减少DOM数，避免增加无意义的页面元素。

___
### 参考
1. [CSS伪类与伪元素完全指南](https://www.jianshu.com/p/9086114e07d4)
2. [伪元素和伪类](https://segmentfault.com/a/1190000013737796)
3. [总结伪类与伪元素](http://www.alloyteam.com/2016/05/summary-of-pseudo-classes-and-pseudo-elements/)
