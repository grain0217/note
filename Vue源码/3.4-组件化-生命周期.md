 每个Vue实例从创建到销毁都要经过一系列过程——设置数据监听、编译模板、挂载实例到DOM并在数据变化时更新DOM等。同时在这个过程中也会运行一些叫做生命周期钩子的函数，通过对应的钩子函数开发者可以添加代码使得它们在Vue实例的不同阶段运行。

![Vue实例生命周期](https://pic.downk.cc/item/5faac3511cd1bbb86bd1b150.png)

在Vue.js的源码中，实例的生命周期钩子是通过`callHook`触发的，如：
```js
// 1. 初始化Vue实例时
Vue.prototype._init = function (options) {
  // vm.$options合并

  // 实例的生命周期、事件监听...

  // 触发beforeCreate钩子
  callHook(vm, 'beforeCreate')
  
  // ...

  // 触发created钩子
  callHook(vm, 'created')

  // ...
  vm.$mount(vm.$options.el)
}

// 2. 挂载实例时
Vue.prototype.$mount = function (el) {
  return mountComponent(this, el)
}

function mountComponent (vm, el) {
  vm.$el = el

  // 触发beforeMount钩子
  callHook(vm, 'beforeMount')

  new Watcher(vm, updateComponent, noop, {
    before () {
      if (vm._isMounted && !vm._isDestroyed) {
        callHook(vm, 'beforeUpdate')
      }
    }
  }, true)

  if (vm.$vnode == null) {
    vm._isMounted = true
    // 触发mounted钩子
    callHook(vm, 'mounted')
  }

  return vm
}
```

`callHook`的定义：
```js
// src/core/instance/lifecycle
function callHook (vm, hook) {
  pushTarget()
  const handlers = vm.$options[hook]
  if (handlers) {
    for (let i = 0, j = handlers.length; i < j; i++) {
      handlers[i].call(vm)
    }
  }
  if (vm._hasHookEvent) {
    vm.$emit('hook:' + hook)
  }
  popTarget()
}
```

根据传入的参数生命周期钩子`hook`字符串，拿到对应实例的钩子`vm.$options[hook]`中记录的回调函数数组，遍历执行它，这就是`callhoook`函数的逻辑。

### beforeCreate和created
前文已经给到：
```js
Vue.prototype._init = function (options) {
  // ...
  initLifecycle(vm)
  initEvents(vm)
  initRender(vm)
  callHook(vm, 'beforeCreate')
  initInjections(vm)
  initState(vm)
  initProvide(vm)
  callHook(vm, 'created')
  // ...
}
```


